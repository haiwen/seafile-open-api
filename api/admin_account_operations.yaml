openapi: 3.0.3
info:
  title: Account Operations - System Admin
  description: |-
    The official SeaTable API Reference (OpenAPI 3.0). - Part 'User Account Operations'.
  version: '11'
servers:
  - url: https://{server}
    variables: 
      server:
        default: cloud.seafile.com

x-readme:
  explorer-enabled: true
  metrics-enabled: false
  proxy-enabled: false

components:
  securitySchemes:
    AccountTokenAuth:
      type: http
      scheme: bearer
      description: This is the [Account-Token](/reference/authentication).
      bearerFormat: Account-Token

  parameters:
  # Query parameters
    page:
      name: page
      in: query
      required: false
      schema:
        type: integer
        default: 1
      example: 1

    per_page:
      name: per_page
      in: query
      required: false
      schema:
        type: integer
      example: 25
    owner: 
      name: owner
      in: query
      required: false
      schema: 
        type: string
      example: owner@owner.com
      description: Library owner's email.

    query: 
      name: query
      in: query
      required: true
      description: keyword for searching
      schema: 
        type: string
 
    parent_dir: 
      name: parent_dir
      in: query
      required: true
      description: Parent directory
      schema: 
        type: string
        example: /folder

  # Path parameters
    email: 
      name: email
      in: path
      required: true
      schema:
        type: string
        example: Seafile@seafile.com
    
    repo_id:
      name: repo_id
      in: path
      description: The unique identifier of a library
      required: true
      schema:
        type: string
        pattern: '^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$'

    group_id: 
      name: group_id
      in: path
      required: true
      description: The unique identifier of a group
      schema: 
        type: integer
        example: 8
  schemas:
    # requestBody schemas
      password:
        type: string
        example: password
      
      is_staff:
        type: boolean
        description: Staff state, true or false

      contact_email: 
        type: string
        description: if no value passed, or pass your old contact email, this field will not be changed
        example: example@example.com
      
      email: 
        type: string
        description: 'User email' 
        example: Seafile@example.com
        
      update_status: 
        type: object
        properties:
          status: 
            type: string
            enum:
              - normal
              - read-only
            description: normal or read-only
      update_name:
        type: object
        properties:
          name: 
            type: string
            description: The new name of the library
            example: new_name_library

      transfer: 
        type: object
        properties:
          owner: 
            type: string
            example: Seafile@example.com

    # response schemas
      no_owner:
        type: object
        properties:
          page_info:
            type: object
            description: Paging Information
            properties:
              has_next_page:
                type: boolean
              current_page:
                type: integer
          repos: 
            type: array
            items: 
              type: object
              description: Library info
              properties:
                id: 
                  type: string
                name: 
                  type: string
                owner: 
                  type: string
                owner_email: 
                  type: string
                owner_contact_email: 
                  type: string
                size: 
                  type: integer
                size_formatted: 
                  type: string
                encrypted:  
                  type: boolean
                file_count: 
                  type: integer
                status: 
                  type: string
                last_modified: 
                  type: string
                owner_name: 
                  type: string
      owner: 
        properties:
          owner: 
            type: string
          repos: 
            type: array
            items: 
              type: object
              description: Library info
              properties:
                status: 
                  type: string
                name: 
                  type: string
                encrypted: 
                  type: boolean
                file_count: 
                  type: integer
                owner: 
                  type: string
                size_formatted: 
                  type: string
                id: 
                  type: string
                size: 
                  type: integer
          name: 
            type: string

paths:
  /api/v2.1/admin/users/:
    get:
      tags:
        - Accounts
      summary: List all users' info
      description: Return all user information. 
      security:
        - AccountTokenAuth: []
      parameters:
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/per_page'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  total_count: 
                    type: integer
                  data: 
                    type: array
                    items: 
                      type: object
                      description: User info 
                      properties:
                        login_id: 
                          type: string
                        quota_usage: 
                          type: integer
                        last_login: 
                          type: string
                        name: 
                          type: string
                        create_time: 
                          type: string
                        is_active: 
                          type: boolean
                        is_staff: 
                          type: boolean
                        contact_email: 
                          type: string
                        reference_id: 
                          type: string
                        department: 
                          type: string
                        quota_total: 
                          type: integer
                        role: 
                          type: string
                        email: 
                          type: string
                example: {
                  "data": [
                      {
                          "login_id": "",
                          "quota_usage": 4509,
                          "last_login": "2019-08-12T01:31:49.873",
                          "name": "851958789",
                          "create_time": "2019-06-26T03:42:45+00:00",
                          "is_active": true,
                          "is_staff": true,
                          "contact_email": "",
                          "reference_id": "",
                          "department": "",
                          "quota_total": -2,
                          "role": "default",
                          "email": "Seafile@qq.com"
                      },
                      {
                          "login_id": "",
                          "quota_usage": 319340737,
                          "last_login": "2019-08-09T07:00:25.548",
                          "name": "123",
                          "create_time": "2019-06-26T06:06:59+00:00",
                          "is_active": true,
                          "is_staff": true,
                          "contact_email": "",
                          "reference_id": "",
                          "department": "",
                          "quota_total": -2,
                          "role": "can_generate_upload_link_false",
                          "email": "Seahub@123.com"
                      }
                  ],
                  'total_count': 2
                 }
    
    post:
      tags:
        - Accounts
      summary: Add user
      description: Return user information.
      security:
        - AccountTokenAuth: []
      requestBody:
        content:
          multipart/form-data:
            schema: 
              type: object
              properties:
                email: 
                  $ref: '#/components/schemas/email'
                password: 
                  $ref: '#/components/schemas/password'
                is_staff:
                  $ref: '#/components/schemas/is_staff'
                is_active:
                  type: boolean
                  description: true or false
                role:
                  type: string
                  description: User role
                  example: Owner
                name: 
                  type: string
                  description: User name
                login_id:
                  type: string
                contact_email:
                  $ref: '#/components/schemas/contact_email'
                reference_id:
                  type: string
                department:
                  type: string
                quota_total:
                  type: integer
                  description: unit is MB
              required:
                - email
                - password
      responses:
        '200': 
          description: OK
          content:
            application/json: 
              schema: 
                type: object
                description: User info
                properties:
                  email: 
                    type: string
                  name: 
                    type: string
                  contact_email: 
                    type: string
                  login_id: 
                    type: string
                  is_staff: 
                    type: boolean
                  is_active: 
                    type: boolean
                  reference_id: 
                    type: string
                  quota_usage: 
                    type: integer
                  quota_total: 
                    type: integer
                  create_time: 
                    type: string
                  has_default_device: 
                    type: boolean
                  is_force_2fa: 
                    type: boolean
                  institution: 
                    type: string
                  role: 
                    type: string
                  add_user_tip: 
                    type: string
                example: {
                  "email": "608c4afc64d7440eaa00c872a4302770@auth.local",
                  "name": "Seafile111",
                  "contact_email": "Seafile111@example.com",
                  "login_id": "",
                  "is_staff": false,
                  "is_active": true,
                  "reference_id": "",
                  "quota_usage": 0,
                  "quota_total": 3000000000,
                  "create_time": "2024-03-26T14:00:39+08:00",
                  "has_default_device": false,
                  "is_force_2fa": false,
                  "institution": "",
                  "role": "default",
                  "add_user_tip": "Successfully added user Seafile111@example.com. An email notification has been sent."
                   }

  /api/v2.1/admin/search-user/:
    get:
      tags:
        - Accounts
      summary: Search user
      description: By providing keywords for precise or fuzzy matching, users who meet the search criteria can be found.
      security:
        - AccountTokenAuth: []
      parameters:
        - $ref: '#/components/parameters/query'
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/per_page'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  user_list: 
                    type: array
                    items: 
                      type: object
                      description: User info
                      properties:
                        email: 
                          type: string
                        name: 
                          type: string
                        contact_email: 
                          type: string
                        is_staff: 
                          type: boolean
                        is_active: 
                          type: boolean
                        source: 
                          type: string
                        quota_usage: 
                          type: integer
                        quota_total: 
                          type: integer
                        create_time: 
                          type: string
                        last_login: 
                          type: string
                        last_access_time: 
                          type: string
                        role: 
                          type: string
                        institution: 
                          type: string
                  page_info: 
                    type: object
                    properties:
                      has_next_page: 
                        type: boolean
                      current_page: 
                        type: integer
                example: {
                  "user_list": [
                      {
                          "email": "admin@seafile.com",
                          "name": "Teamfile",
                          "contact_email": "admin@seafile.com",
                          "is_staff": true,
                          "is_active": true,
                          "source": "db",
                          "quota_usage": 0,
                          "quota_total": 1000000000000,
                          "create_time": "2023-03-13T17:56:02+08:00",
                          "last_login": "2024-03-25T15:38:33+08:00",
                          "last_access_time": "2024-03-26T10:56:58+08:00",
                          "role": "default",
                          "institution": null
                      },
                      {
                          "email": "admin123@seafile.com",
                          "name": "admin123",
                          "contact_email": "admin123@seafile.com",
                          "is_staff": false,
                          "is_active": true,
                          "source": "db",
                          "quota_usage": 0,
                          "quota_total": 3000000000,
                          "create_time": "2023-04-12T13:07:54+08:00",
                          "last_login": "2023-04-12T13:14:47+08:00",
                          "last_access_time": "2023-04-12T13:14:47+08:00",
                          "role": "default",
                          "institution": null
                      }
                  ],
                  "page_info": {
                      "has_next_page": true,
                      "current_page": 1
                  }
                    }

  /api/v2.1/admin/users/{email}/:
    get:
      tags:
        - Accounts
      summary: Get a user's info
      description: Return detailed information of the user.
      security:
        - AccountTokenAuth: []
      parameters:
        - $ref: '#/components/parameters/email'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                description: User detail info
                properties:
                  email: 
                    type: string
                  name: 
                    type: string
                  contact_email: 
                    type: string
                  login_id: 
                    type: string
                  is_staff: 
                    type: boolean
                  is_active: 
                    type: boolean
                  reference_id: 
                    type: string
                  quota_usage: 
                    type: integer
                  quota_total: 
                    type: integer
                  create_time: 
                    type: string
                  has_default_device: 
                    type: boolean
                  is_force_2fa: 
                    type: boolean
                  institution: 
                    type: string
                  role: 
                    type: string
                  avatar_url: 
                    type: string
                  upload_rate_limit: 
                    type: string
                  download_rate_limit: 
                    type: string
                  last_login: 
                    type: string
                  last_access_time: 
                    type: string
                example: {
                  "email": "admin123@seafile.com",
                  "name": "admin123",
                  "contact_email": "",
                  "login_id": "",
                  "is_staff": false,
                  "is_active": true,
                  "reference_id": "",
                  "quota_usage": 0,
                  "quota_total": 3000000000,
                  "create_time": "2023-04-12T13:07:54+08:00",
                  "has_default_device": false,
                  "is_force_2fa": false,
                  "institution": "",
                  "role": "default",
                  "avatar_url": "https://demo.seafile.top/media/avatars/default.png",
                  "upload_rate_limit": "",
                  "download_rate_limit": "",
                  "last_login": "2023-04-12T13:14:47+08:00",
                  "last_access_time": "2023-04-12T13:14:47+08:00"
                 }

    put:
      tags:
        - Accounts
      summary: Update user info
      description: Return user information.
      security:
        - AccountTokenAuth: []
      parameters:
        - $ref: '#/components/parameters/email'
      requestBody:
        content:
          application/json:
            schema: 
              type: object
              properties:
                password: 
                  $ref: '#/components/schemas/password'
                is_staff:
                  $ref: '#/components/schemas/is_staff'
                is_active:
                  type: boolean
                  description: true or false
                role:
                  type: string
                  description: User role
                  example: Owner
                name: 
                  type: string
                  description: User name
                login_id:
                  type: string
                contact_email:
                  $ref: '#/components/schemas/contact_email'
                reference_id:
                  type: string
                department:
                  type: string
                quota_total:
                  type: integer
                  description: unit is MB
      responses:
        '200':
          description: OK
          content:
            application/json: 
              schema: 
                type: object
                description: User info 
                properties:                  
                  email: 
                    type: string
                  name: 
                    type: string
                  contact_email: 
                    type: string
                  login_id: 
                    type: string
                  is_staff: 
                    type: boolean
                  is_active: 
                    type: boolean
                  reference_id: 
                    type: string
                  quota_usage: 
                    type: integer
                  quota_total: 
                    type: integer
                  create_time: 
                    type: string
                  has_default_device: 
                    type: boolean
                  is_force_2fa: 
                    type: boolean
                  institution: 
                    type: string
                  role: 
                    type: string
                  update_status_tip: 
                    type: string
                  upload_rate_limit: 
                    type: string
                  download_rate_limit: 
                    type: string
                example: {
                  "email": "admin123@seafile.com",
                  "name": "admin123",
                  "contact_email": "",
                  "login_id": "",
                  "is_staff": false,
                  "is_active": true,
                  "reference_id": "",
                  "quota_usage": 0,
                  "quota_total": 1000000,
                  "create_time": "2023-04-12T13:07:54+08:00",
                  "has_default_device": false,
                  "is_force_2fa": false,
                  "institution": "",
                  "role": "default",
                  "update_status_tip": "",
                  "upload_rate_limit": "",
                  "download_rate_limit": ""
                     }

    delete: 
      tags:
        - Accounts
      summary: Delete user
      description: Delete existing users.
      security:
        - AccountTokenAuth: []
      parameters:
        - $ref: '#/components/parameters/email'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema: 
                type: object
                properties:
                  success:
                    type: boolean
                    description: Success state

  /api/v2.1/admin/update-user-ccnet-email/:
    put:
      tags: 
        - Accounts
      summary: Update user identity email
      description: Seafile uses an email as user's unique identification. This email is stored in ccnet database, and should NOT be modified. But in some special cases, you want to change this email, you can use this api.
      security:
        - AccountTokenAuth: []
      requestBody: 
        content:
          application/json: 
            schema: 
              type: object
              properties:
                old_email:
                  type: string
                  description: Current email
                  example: old@example.com
                new_email:
                  type: string
                  description: New email
                  example: new@example.com
              required:
                - old_email
                - new_email
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema: 
                type: object
                properties:
                  success: 
                    type: boolean
                    description: Success state

  /api2/accounts/{email}/: 
    post: 
      tags:
        - Accounts
      summary: Migrate account
      description: Migrate existing account.
      security:
        - AccountTokenAuth: []
      parameters:
        - $ref: '#/components/parameters/email'
      requestBody: 
        content:
          application/json: 
            schema: 
              type: object
              properties:
                op:
                  type: string
                  description: Use op=migrate to migrate an account
                  example: migrate
                to_user:
                  type: string
                  description: The user id you want to migrate the user to, this user must exist
                  example: Seafile@example.com
              required:
                - op
                - to_user
      responses:
        '200':
          description: OK
          content:
            application/json: 
              schema: 
                type: object
                properties:
                  success: 
                    type: boolean
                    description: Success state

  /api/v2.1/admin/libraries/:
    get:
      tags:
        - Libraries
      summary: Get all libraries/Search library by owner
      description: |-
        - If there is no parameter owner, this API will return all library information
        - If there is parameter owner, return the library information that meets the conditions 
        *Note:Available for Seafile v6.0.0+*
      security:
        - AccountTokenAuth: []
      parameters:
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/per_page'
        - $ref: '#/components/parameters/owner'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema: 
                oneOf:
                  - $ref: '#/components/schemas/no_owner'
                  - $ref: '#/components/schemas/owner'
              examples:
                No-Owner: 
                  value: {
                    "page_info": {
                        "has_next_page": true,
                        "current_page": 1
                    },
                    "repos": [
                        {
                            "id": "1b9a259b-fa28-4cbc-890f-8970c349c459",
                            "name": "C#",
                            "owner": "admin@seafile.com",
                            "owner_email": "admin@seafile.com",
                            "owner_contact_email": "admin@seafile.com",
                            "size": 0,
                            "size_formatted": "0 bytes",
                            "encrypted": false,
                            "file_count": 0,
                            "status": "normal",
                            "last_modified": "2024-03-27T10:05:39+08:00",
                            "owner_name": "Teamfile"
                        },
                        {
                            "id": "0d566f89-bcde-4d21-a710-9872709da7f9",
                            "name": "C++",
                            "owner": "admin@seafile.com",
                            "owner_email": "admin@seafile.com",
                            "owner_contact_email": "admin@seafile.com",
                            "size": 0,
                            "size_formatted": "0 bytes",
                            "encrypted": false,
                            "file_count": 0,
                            "status": "normal",
                            "last_modified": "2024-03-27T10:05:34+08:00",
                            "owner_name": "Teamfile"
                        }
                    ]
                    } 
                Owner: 
                  value: {
                    "owner": "Seafile@example.com",
                    "repos": [
                        {
                            "status": "normal",
                            "name": "lib-of-lian",
                            "encrypted": false,
                            "file_count": 0,
                            "owner": "Seafile@example.com",
                            "size_formatted": "16.5 KB",
                            "id": "78c620ee-2989-4427-8eff-7748f4fbebc0",
                            "size": 16883
                        },
                        {
                            
                            "status": "normal",
                            "name": "encrypted",
                            "encrypted": true,
                            "file_count": 0,
                            "owner": "Seafile@example.com",
                            "size_formatted": "18.1 MB",
                            "id": "47695bb8-3364-4274-939d-3c5a0df9710c",
                            "size": 18997225
                        },
                        ...
                    ],
                    "name": ""
                    }
    post: 
      tags:
        - Libraries
      summary: Create library
      description: Response code 200 and newly created library information are returned.
      security:
        - AccountTokenAuth: []
      requestBody:
        content:
          application/json: 
            schema: 
              type: object
              properties:
                name: 
                  type: string
                  description: Library name
                  example: new_lib_name
                owner: 
                  type: string
                  description: default is current admin user  
              required:
                - name
      responses:
        '200':
          description: OK 
          content:
            application/json: 
              schema: 
                type: object
                description: Library info
                properties:
                  id: 
                    type: string
                  name: 
                    type: string
                  owner: 
                    type: string
                  owner_email: 
                    type: string
                  owner_contact_email: 
                    type: string
                  size: 
                    type: integer
                  size_formatted: 
                    type: string
                  encrypted: 
                    type: boolean
                  file_count: 
                    type: integer
                  status: 
                    type: string
                  last_modified: 
                    type: string
                  owner_name: 
                    type: string
                example: {
                  "id": "6597901e-60eb-4c8c-870b-0f23fce6eb70",
                  "name": "new_lib_name",
                  "owner": "admin@seafile.com",
                  "owner_email": "admin@seafile.com",
                  "owner_contact_email": "admin@seafile.com",
                  "size": 0,
                  "size_formatted": "0 bytes",
                  "encrypted": false,
                  "file_count": 0,
                  "status": "normal",
                  "last_modified": "2024-03-27T14:11:12+08:00",
                  "owner_name": "Teamfile"
                 }


  /api/v2.1/admin/search-library/:
    get:
      tags:
        - Libraries
      summary: Search library by name
      description: Returns library information for a specified name.
      security:
        - AccountTokenAuth: []
      parameters:
        - $ref: '#/components/parameters/query'
      responses:
        '200':
          description: OK 
          content:
            application/json: 
              schema: 
                type: object
                properties:
                  repo_list: 
                    type: array
                    items: 
                      type: object
                      description: Library info
                      properties:
                        id: 
                          type: string
                        name: 
                          type: string
                        owner_email: 
                          type: string
                        owner_name: 
                          type: string
                        owner_contact_email: 
                          type: string
                        size: 
                          type: integer
                        encrypted: 
                          type: boolean
                        file_count: 
                          type: integer
                        status: 
                          type: string
              example: {
                "repo_list": [
                    {
                        "id": "a0877bb0-c4f8-4316-8e52-c4ce416362c3",
                        "name": "lib in test department",
                        "owner_email": "Seafile@seafile_group",
                        "owner_name": "test department",
                        "owner_contact_email": "",
                        "size": 0,
                        "encrypted": false,
                        "file_count": 0,
                        "status": "normal"
                    },
                    {
                        "id": "b2134604-ea68-41d0-a075-0970e889b848",
                        "name": "lib of 7.1 lian",
                        "owner_email": "Seahub@example.com",
                        "owner_name": "name-of-lian",
                        "owner_contact_email": "Seahub@example.com",
                        "size": 15,
                        "encrypted": false,
                        "file_count": 0,
                        "status": "normal"
                    }
                ]
              }

  /api/v2.1/admin/libraries/{repo_id}/: 
    get:
      tags:
        - Libraries
      summary: Get a library info
      description: Returns basic information about the specified library.
      security:
        - AccountTokenAuth: []
      parameters:
        - $ref: '#/components/parameters/repo_id'
      responses:
        '200':
          description: OK 
          content:
            application/json: 
              schema: 
                type: object
                description: Library info
                properties:
                  id: 
                    type: string
                  name: 
                    type: string
                  owner: 
                    type: string
                  owner_email: 
                    type: string
                  owner_contact_email: 
                    type: string
                  size: 
                    type: integer
                  size_formatted: 
                    type: string
                  encrypted: 
                    type: boolean
                  file_count: 
                    type: integer
                  status: 
                    type: string
                  last_modified: 
                    type: string
                  owner_name: 
                    type: string
                example: {
                  "id": "1b9a259b-fa28-4cbc-890f-8970c349c459",
                  "name": "C#",
                  "owner": "admin@seafile.com",
                  "owner_email": "admin@seafile.com",
                  "owner_contact_email": "admin@seafile.com",
                  "size": 0,
                  "size_formatted": "0 bytes",
                  "encrypted": false,
                  "file_count": 0,
                  "status": "normal",
                  "last_modified": "2024-03-27T10:05:39+08:00",
                  "owner_name": "Teamfile"
                 }

    delete: 
      tags:
        - Libraries
      summary: Delete a library
      description: |-
        Delete an existing library.
        *Note:Available for Seafile v6.0.0+*
      security:
        - AccountTokenAuth: []
      parameters:
        - $ref: '#/components/parameters/repo_id'
      responses:
        '200':
          description: OK 
          content:
            application/json:
              schema: 
                type: object
                properties:
                  success: 
                    type: boolean
                    description: Success state

    put: 
      tags:
          - Libraries
      summary: Update a library status/Transfer a library
      description: |-
        - Update the status of existing libraries. 
        - Transfer existing libraries
        *Note:Available for Seafile v6.0.0+*
      security:
        - AccountTokenAuth: []
      parameters:
        - $ref: '#/components/parameters/repo_id'
      requestBody: 
        content:
          application/json: 
            schema: 
              oneOf:
                - $ref: '#/components/schemas/update_status'
                - $ref: '#/components/schemas/transfer'
                - $ref: '#/components/schemas/update_name'
      responses:
        '200':
          description: OK 
          content:
            application/json:
              schema: 
                type: object
                properties:
                  id: 
                    type: string
                  name: 
                    type: string
                  owner: 
                    type: string
                  owner_email: 
                    type: string
                  owner_contact_email: 
                    type: string
                  size: 
                    type: integer
                  size_formatted: 
                    type: string
                  encrypted: 
                    type: boolean
                  file_count: 
                    type: integer
                  status: 
                    type: string
                  last_modified: 
                    type: string
                  owner_name: 
                    type: string
              examples:
                Update a Library Status/Update Library Name: 
                  value: {
                        "id": "1b9a259b-fa28-4cbc-890f-8970c349c459",
                        "name": "C#",
                        "owner": "admin@seafile.com",
                        "owner_email": "admin@seafile.com",
                        "owner_contact_email": "admin@seafile.com",
                        "size": 0,
                        "size_formatted": "0 bytes",
                        "encrypted": false,
                        "file_count": 0,
                        "status": "read-only",
                        "last_modified": "2024-03-27T10:05:39+08:00",
                        "owner_name": "Teamfile"
                          }
                Transfer a Library: 
                    value: {
                        "id": "0dd5949a-94e4-4a8a-b727-9cbe3f2dcad0",
                        "name": "My Library",
                        "owner": "a1@a1.com",
                        "owner_email": "a1@a1.com",
                        "owner_name": "a1",
                        "owner_contact_email": "a1@a1.com",
                        "size": 180175,
                        "size_formatted": "176.0 KB",
                        "encrypted": false,
                        "file_count": 1,
                        "status": "normal"
                    }

  /api/v2.1/admin/trash-libraries/:
    get:
      tags:
        - Libraries
      summary: Get all deleted libraries/Get deleted libraries by owner
      description: Returns information about the deleted library.
      security:
        - AccountTokenAuth: []
      parameters:
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/per_page'
        - $ref: '#/components/parameters/owner'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema: 
                type: object
                properties:
                  page_info: 
                    type: object
                    description: Page info
                    properties:
                      has_next_page:
                        type: boolean
                      current_page:
                        type: integer
                  repos:
                    type: array
                    items: 
                      type: object
                      description: Library info
                      properties:
                        name: 
                          type: string
                        id: 
                          type: string
                        owner: 
                          type: string
                        owner_name: 
                          type: string
                        delete_time: 
                          type: string
                example: {
                  "page_info": {
                      "has_next_page": true,
                      "current_page": 2
                  },
                  "repos": [
                      {
                          "name": "Java",
                          "id": "d5225045-c4f5-4be6-aa9a-89b1bdaa9dd7",
                          "owner": "admin@seafile.com",
                          "owner_name": "Teamfile",
                          "delete_time": "2024-03-28T09:46:34+08:00"
                      }
                  ]
                  }
    delete: 
      tags:
        - Libraries
      summary: Clean all deleted libraries
      description: Clean all deleted libraries.
      security:
        - AccountTokenAuth: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema: 
                type: object
                properties:
                  success:
                    type: boolean
                    description: Success state      

  /api/v2.1/admin/trash-libraries/{repo_id}/:
    delete: 
      tags:
        - Libraries
      summary: Clean deleted library
      description: Delete the specified library from the trash.
      security:
        - AccountTokenAuth: []
      parameters:
        - $ref: '#/components/parameters/repo_id'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema: 
                type: object
                properties:
                  success:
                    type: boolean
                    description: Success state
                    
    put:
      tags:
        - Libraries
      summary: Restore deleted library
      description: Restores the specified deleted library.
      security:
        - AccountTokenAuth: []
      parameters:
        - $ref: '#/components/parameters/repo_id'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema: 
                type: object
                properties:
                  success:
                    type: boolean
                    description: Success state      
    
  /api/v2.1/admin/libraries/{repo_id}/history-limit/:
    get:
      tags:
        - Libraries
      summary: Get library history setting
      description: By calling this interface you can get the history storage period of the specified library.
      security:
        - AccountTokenAuth: []
      parameters:
        - $ref: '#/components/parameters/repo_id'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema: 
                type: object
                description: Storage time
                properties:
                  keep_days: 
                    type: integer
                example: {
                  "keep_days": 60
                 }

    put:
      tags:
        - Libraries
      summary: Update library history setting
      description: Using this interface you can set the history storage period of a specified library.
      security:
        - AccountTokenAuth: []
      parameters:
        - $ref: '#/components/parameters/repo_id'
      requestBody: 
        content:
          multipart/form-data:
            schema: 
              type: object
              properties:
                keep_days:
                  type: integer
                  description: -1 means no limit. 0 means don't keep history.
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema: 
                type: object
                properties:
                  keep_days:
                    type: integer
                example: { "keep_days" :-1 }
  /api/v2.1/admin/libraries/{repo_id}/dirents/:
    post: 
      tags:
          - Libraries
      summary: Create library folder
      description: Create a new directory for the specified directory.
      security:
        - AccountTokenAuth: []
      parameters:
        - $ref: '#/components/parameters/repo_id'
        - $ref: '#/components/parameters/parent_dir'
      requestBody: 
        content:
          application/json:
            schema: 
              type: object
              properties:
                obj_name: 
                  type: string
                  description: New folder's name
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema: 
                type: object
                description: Folder info 
                properties:
                  is_file: 
                    type: boolean
                  obj_name:
                    type: string
                  file_size: 
                    type: integer
                  last_update: 
                    type: string
                example: {
                  "is_file": false,
                  "obj_name": "t",
                  "file_size": "",
                  "last_update": "2024-03-28T10:41:33+08:00"
                    }

  /api/v2.1/admin/groups/:
    get: 
      tags:
        - Groups 
      summary: Get all groups
      description: List all group information.
      security:
        - AccountTokenAuth: []
      parameters:
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/per_page'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema: 
                type: object
                properties:
                  page_info:
                    type: object
                    description: Page info
                    properties:
                      current_page:
                        type: integer
                      has_next_page:
                        type: boolean
                  groups: 
                    type: array
                    items: 
                      type: object
                      description: Group info
                      properties:
                        id: 
                          type: string
                        name: 
                          type: string
                        owner: 
                          type: string
                        owner_name: 
                          type: string
                        created_at: 
                          type: string
                        quota: 
                          type: string
                        parent_group_id: 
                          type: string
                example: {
                  "page_info": {
                      "current_page": 1,
                      "has_next_page": true
                  },
                  "groups": [
                      {
                      "id": 2321,
                      "name": "A-测试部门",
                      "owner": "system admin",
                      "owner_name": "system admin",
                      "created_at": "2024-03-13T11:22:00+08:00",
                      "quota": -2,
                      "parent_group_id": -1
                    },
                     {
                        "id": 2320,
                        "name": "abc",
                        "owner": "wei@fuloon.com",
                        "owner_name": "wei",
                        "created_at": "2024-03-08T09:05:01+08:00",
                        "quota": -1,
                        "parent_group_id": 0
                      }  
                   ]
                  }
    post: 
      tags:
        - Groups 
      summary: Create a new group
      description: Create a new group for the specified user. 
      security:
        - AccountTokenAuth: []
      requestBody: 
        content:
          application/json:
            schema: 
              type: object
              properties:
                group_name:
                  type: string
                  description: Group name
                group_owner:
                  type: string
                  description: Email of group owner. If left blank, owner will be admin.
                  example: 'daniel@seafile.com'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema: 
                type: object
                description: Group info
                properties:
                  id: 
                    type: integer
                  name: 
                    type: string
                  owner: 
                    type: string
                  owner_name: 
                    type: string
                  created_at: 
                    type: string
                  quota: 
                    type: integer
                  parent_group_id: 
                    type: integer
                example: {
                  "id": 2322,
                  "name": "Seafile",
                  "owner": "admin@seafile.com",
                  "owner_name": "Teamfile",
                  "created_at": "2024-03-28T14:07:22+08:00",
                  "quota": -1,
                  "parent_group_id": 0
                }
  /api/v2.1/admin/groups/{group_id}/:
    delete: 
      tags:
        - Groups
      summary: Delete a group
      description: Delete a specified group.
      security:
        - AccountTokenAuth: []
      parameters:
        - $ref: '#/components/parameters/group_id'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema: 
                type: object
                properties:
                  success:
                    type: boolean
                    description: Success state

    put: 
      tags:
        - Groups
      summary: Transfer a group
      description: Transfer existing groups to specified users.
      security:
        - AccountTokenAuth: []
      parameters:
        - $ref: '#/components/parameters/group_id'
      requestBody: 
        content:
          application/json:
            schema: 
              type: object
              properties:
                new_owner:
                  type: string
                  description: Owner email
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema: 
                type: object
                description: Group info
                properties:
                  owner: 
                    type: string
                  created_at: 
                    type: string
                  id: 
                    type: integer
                  name: 
                    type: string
                example: {
                  "owner": "Seafile@example.com",
                  "created_at": "2016-08-04T17:34:05+08:00",
                  "id": 1528,
                  "name": "test_group"
                  }


  /api/v2.1/admin/search-group/:
    get: 
      tags:
        - Groups 
      summary: Search group
      description: Returns group information for the specified keyword. 
      security:
        - AccountTokenAuth: []
      parameters:
        - $ref: '#/components/parameters/query'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema: 
                type: object
                description: Group info
                properties:
                  group_list: 
                    type: array
                    items: 
                      type: object
                      properties:
                        id: 
                          type: integer
                        name: 
                          type: string
                        owner: 
                          type: string
                        owner_name: 
                          type: string
                        created_at: 
                          type: string
                        quota: 
                          type: integer
                        parent_group_id: 
                          type: integer
                example: {
                  "group_list": [
                      {
                          "id": 2224,
                          "name": "abc",
                          "owner": "demo@seafile.com",
                          "owner_name": "freedoom",
                          "created_at": "2023-09-13T17:03:54+08:00",
                          "quota": -1,
                          "parent_group_id": 0
                      },
                      {
                          "id": 2320,
                          "name": "abc",
                          "owner": "wei@fuloon.com",
                          "owner_name": "wei",
                          "created_at": "2024-03-08T09:05:01+08:00",
                          "quota": -1,
                          "parent_group_id": 0
                      }
                  ]
                  }

  /api/v2.1/admin/groups/{group_id}/members/:
    get:
      tags:
        - Groups
      summary: List group members
      description: Get all members of a group.
      security:
        - AccountTokenAuth: []
      parameters:
        - $ref: '#/components/parameters/group_id'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema: 
                type: object
                properties:
                  group_id: 
                    type: integer
                  group_name:
                    type: string
                  members: 
                    type: array
                    items: 
                      type: object
                      description: Member info
                      properties:
                        group_id: 
                          type: string
                        name: 
                          type: string
                        email: 
                          type: string
                        contact_email: 
                          type: string
                        login_id: 
                          type: string
                        avatar_url: 
                          type: string
                        is_admin: 
                          type: string
                        role: 
                          type: string
                  page_info:
                    type: object
                    description: Page info
                    properties:
                      has_next_page:
                        type: boolean
                      current_page:
                        type: integer
                example: {
                  "group_id": 2265,
                  "group_name": "test_group",
                  "members": [
                      {
                          "group_id": 2265,
                          "name": "Teamfile",
                          "email": "admin@seafile.com",
                          "contact_email": "admin@seafile.com",
                          "login_id": "",
                          "avatar_url": "https://demo.seafile.top/media/avatars/7/a/ce4483526f8aefec13fb8c14458893/resized/80/1ae78cb64ba5442c2929247926af0e6f.png",
                          "is_admin": true,
                          "role": "Owner"
                      },
                      {
                          "group_id": 2265,
                          "name": "test2_group",
                          "email": "5a77db35418648c8ab23fd401da595ca@auth.local",
                          "contact_email": "Seafile@example.com",
                          "login_id": "",
                          "avatar_url": "https://demo.seafile.top/media/avatars/default.png",
                          "is_admin": false,
                          "role": "Member"
                      }
                  ],
                  "page_info": {
                      "has_next_page": false,
                      "current_page": 1
                  }
                 }
